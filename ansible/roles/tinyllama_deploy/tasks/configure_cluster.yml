---
# Cluster configuration tasks

- name: Get GKE cluster credentials
  ansible.builtin.command:
    cmd: >
      gcloud container clusters get-credentials {{ tinyllama_deploy_gke_cluster_name }}
      --region {{ tinyllama_deploy_gke_cluster_region }}
      --project {{ tinyllama_deploy_gcp_project_id }}
  changed_when: true

- name: Verify cluster connectivity
  ansible.builtin.command: kubectl cluster-info
  register: tinyllama_deploy_cluster_info
  changed_when: false

- name: Display cluster info
  ansible.builtin.debug:
    var: tinyllama_deploy_cluster_info.stdout_lines
