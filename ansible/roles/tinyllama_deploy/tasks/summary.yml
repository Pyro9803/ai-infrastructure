---
# Summary display tasks

- name: Display deployment summary
  ansible.builtin.debug:
    msg:
      - "=========================================="
      - "TinyLlama Deployment Summary"
      - "=========================================="
      - "Environment: {{ tinyllama_deploy_environment }}"
      - "Namespace: {{ tinyllama_deploy_kubernetes.namespace }}"
      - "RayService: {{ tinyllama_deploy_kubernetes.deployment_name }}"
      - "Ray Cluster: {{ tinyllama_deploy_ray_cluster_name | default('N/A') }}"
      - "Head Pod: {{ tinyllama_deploy_head_pod_name | default('N/A') }}"
      - "Service: {{ tinyllama_deploy_service_name | default('N/A') }}"
      - "=========================================="
      - ""
      - "Next steps:"
      - "1. Port forward to access the service:"
      - "   kubectl port-forward -n {{ tinyllama_deploy_kubernetes.namespace }} svc/{{ tinyllama_deploy_service_name | default('tinyllama-service-serve-svc') }} 8000:8000"
      - ""
      - "2. Test the model:"
      - "   curl -X POST http://localhost:8000/ \\"
      - "     -H 'Content-Type: application/json' \\"
      - '     -d ''{"messages": [{"role": "user", "content": "Hello!"}], "max_tokens": 100}'''
      - ""
      - "3. View logs:"
      - "   kubectl logs -n {{ tinyllama_deploy_kubernetes.namespace }} -l ray.io/node-type=head -f"
      - "=========================================="
